import wmh_utility
import wmh_pre
import wmh_mid_detection
import wmh_normalize
import vent_segment
import wmh_segment
import sys

if __name__ == '__main__':
	desc_path = sys.argv[1]
	desc, error = wmh_utility.load_description(desc_path)
	if not error:
		index = 0
		cases = wmh_utility.load_cases(desc["cases"])
		for c in cases:
			print "now for ", c, index
			wmh_pre.run(desc["dataPath"], desc["atlasPath"], c, desc["files"])
			wmh_mid_detection.run(desc["dataPath"], c)
			wmh_normalize.run(desc["dataPath"], c)
			vent_segment.run(desc["dataPath"], c, desc["ventModelPath"], desc["ventArchPath"])
			wmh_segment.run(desc["dataPath"], c , desc["wmhModelPath"], desc["wmhArchPath"], desc["outFileName"])
			index +=1
	
			
		
		

